<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Code 128 ë°”ì½”ë“œ ìŠ¤ìºë„ˆ1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        video {
            width: 100%;
            max-height: 300px;
            border: 1px solid #ccc;     
        }

        #result {
            font-size: 1.5rem;
            margin-top: 1rem;
            color: green;
        }
    </style>
</head>

<body>
    <h2>ğŸ“· ë°”ì½”ë“œ ìŠ¤ìº” (Code 128)</h2>
    <video id="video" muted autoplay></video>
    <div id="result">ê²°ê³¼ ì—†ìŒ</div>

    <!-- zxing-js/browser -->
    <script type="module">
        import { BrowserMultiFormatReader } from 'https://cdn.jsdelivr.net/npm/@zxing/browser@0.1.1/+esm';

        const codeReader = new BrowserMultiFormatReader();
        const videoElement = document.getElementById('video');

        codeReader
            .listVideoInputDevices()
            .then(videoInputDevices => {
                const selectedDeviceId = videoInputDevices[0].deviceId;

                codeReader.decodeFromVideoDevice(selectedDeviceId, videoElement, (result, err) => {
                    if (result) {
                        document.getElementById('result').textContent = `âœ… ì¸ì‹ ê²°ê³¼: ${result.getText()}`;
                        codeReader.reset(); // í•œ ë²ˆë§Œ ì¸ì‹ í›„ ë©ˆì¶¤ (ì—¬ëŸ¬ë²ˆ í•˜ë ¤ë©´ ì£¼ì„ì²˜ë¦¬)
                    }
                });
            })
            .catch(err => console.error(err));
    </script>
</body>

</html>